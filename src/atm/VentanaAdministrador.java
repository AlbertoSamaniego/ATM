/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package atm;

import bases_datos.Conexion;
import java.awt.Dimension;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Alberto
 */
public class VentanaAdministrador extends JFrame {

    private static final int MAX_CAJERO = 10000;
    private int administrador;
    private int dineroDisponible;

    /**
     * Constructor de la clase Administrador
     * @param administrador número identificativo del administrador logeado
     * @param dineroDisponible dinero disponible del ATM
     */
    public VentanaAdministrador(int administrador, int dineroDisponible) {
        this.administrador = administrador;
        this.dineroDisponible = dineroDisponible;
        clientes = new ArrayList<>();
        cuentas = new ArrayList<>();
        tarjetas = new ArrayList<>();
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setPreferredSize(new Dimension(770, 490));
        setLocation(600, 200);
        initComponents();
        initBD();
        initClientes();
        initCuentas();
        initTarjetas();
        moverPantalla(0);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        contenedor = new javax.swing.JTabbedPane();
        paginaPrincipal = new javax.swing.JPanel();
        lblFondo = new javax.swing.JLabel();
        darAltaUsuario = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        listaClientes = new javax.swing.JList<>();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        txfDNI = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        txfNombre = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        txfApellido1 = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        txfApellido2 = new javax.swing.JTextField();
        btnAddCliente = new javax.swing.JButton();
        darBajaUsuario = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tablaClientes = new javax.swing.JTable();
        btnEliminarCliente = new javax.swing.JButton();
        darAltaCuenta = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        tablaCuentaBancaria = new javax.swing.JTable();
        jPanel2 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        txfAddIban = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        txfAddIbanDni = new javax.swing.JTextField();
        btnAddCuenta = new javax.swing.JButton();
        darBajaCuenta = new javax.swing.JPanel();
        jScrollPane4 = new javax.swing.JScrollPane();
        tablaCuentasEliminar = new javax.swing.JTable();
        jPanel3 = new javax.swing.JPanel();
        txfClienteCuentaEliminar = new javax.swing.JTextField();
        txfIBANEliminar = new javax.swing.JTextField();
        txfCuentaSaldoEliminar = new javax.swing.JTextField();
        btnEliminarCuenta = new javax.swing.JButton();
        bloquearDesbloquearCuenta = new javax.swing.JPanel();
        jScrollPane5 = new javax.swing.JScrollPane();
        tablaCuentasBloquDesbloqu = new javax.swing.JTable();
        btnBloquearCuenta = new javax.swing.JButton();
        btnDesbloquearCuenta = new javax.swing.JButton();
        darAltaTarjeta = new javax.swing.JPanel();
        jScrollPane6 = new javax.swing.JScrollPane();
        tablaAltaTarjetas = new javax.swing.JTable();
        jPanel4 = new javax.swing.JPanel();
        jLabel7 = new javax.swing.JLabel();
        txfAddNumTarjeta = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        txfIbanAddTarjeta = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        txfContrasenaTarjetaAlta = new javax.swing.JTextField();
        btnAddTarjeta = new javax.swing.JButton();
        darBajaTarjeta = new javax.swing.JPanel();
        jScrollPane8 = new javax.swing.JScrollPane();
        tablaBajaTarjetas = new javax.swing.JTable();
        btnEliminarTarjeta = new javax.swing.JButton();
        bloquearDesbloquearTarjeta = new javax.swing.JPanel();
        jScrollPane7 = new javax.swing.JScrollPane();
        tablaBloqDesbloqTarjeta = new javax.swing.JTable();
        btnBloquearTarjeta = new javax.swing.JButton();
        btnDesbloquearTarjeta = new javax.swing.JButton();
        jPanel6 = new javax.swing.JPanel();
        jScrollPane9 = new javax.swing.JScrollPane();
        listaTarjetas = new javax.swing.JList<>();
        jPanel7 = new javax.swing.JPanel();
        jLabel12 = new javax.swing.JLabel();
        txfPINAntiguo = new javax.swing.JTextField();
        jLabel13 = new javax.swing.JLabel();
        txfPINNuevo = new javax.swing.JTextField();
        btnCambiarPIN = new javax.swing.JButton();
        jPanel5 = new javax.swing.JPanel();
        jLabel10 = new javax.swing.JLabel();
        txfDineroBanco = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        txfCantidadIntroducir = new javax.swing.JTextField();
        btnIntroducirDinero = new javax.swing.JButton();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        btnAltaUsuario = new javax.swing.JMenuItem();
        btnBajaUsuario = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();
        btnAltaCuenta = new javax.swing.JMenuItem();
        btnBajaCuenta = new javax.swing.JMenuItem();
        btnBloquDesbloquCuenta = new javax.swing.JMenuItem();
        jMenu3 = new javax.swing.JMenu();
        btnAltaTarjeta = new javax.swing.JMenuItem();
        btnBajaTarjeta = new javax.swing.JMenuItem();
        btnBloquDesbloquTarjeta = new javax.swing.JMenuItem();
        cambiarPIN = new javax.swing.JMenuItem();
        jMenu4 = new javax.swing.JMenu();
        btnRellenarCajero = new javax.swing.JMenuItem();
        btnApagarCajero = new javax.swing.JMenuItem();
        menuSalir = new javax.swing.JMenu();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Administrador ATM");
        setResizable(false);

        contenedor.setTabPlacement(javax.swing.JTabbedPane.RIGHT);

        lblFondo.setIcon(new javax.swing.ImageIcon(System.getProperty("user.dir")+"\\src\\ATM_Images\\logAdmin.png"));

        javax.swing.GroupLayout paginaPrincipalLayout = new javax.swing.GroupLayout(paginaPrincipal);
        paginaPrincipal.setLayout(paginaPrincipalLayout);
        paginaPrincipalLayout.setHorizontalGroup(
            paginaPrincipalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(lblFondo, javax.swing.GroupLayout.DEFAULT_SIZE, 801, Short.MAX_VALUE)
        );
        paginaPrincipalLayout.setVerticalGroup(
            paginaPrincipalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(lblFondo, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 436, Short.MAX_VALUE)
        );

        contenedor.addTab("tab1", paginaPrincipal);

        darAltaUsuario.setBackground(new java.awt.Color(0, 153, 255));
        darAltaUsuario.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        listaClientes.setModel(new javax.swing.DefaultListModel<Cliente>()
        );
        listaClientes.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                listaClientesMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(listaClientes);

        jPanel1.setLayout(new java.awt.GridLayout(4, 2, 20, 10));

        jLabel1.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel1.setText("DNI");
        jPanel1.add(jLabel1);

        txfDNI.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txfDNIFocusGained(evt);
            }
        });
        txfDNI.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txfDNIKeyTyped(evt);
            }
        });
        jPanel1.add(txfDNI);

        jLabel2.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel2.setText("Nombre");
        jPanel1.add(jLabel2);

        txfNombre.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txfNombreFocusGained(evt);
            }
        });
        jPanel1.add(txfNombre);

        jLabel3.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel3.setText("Apellido principal");
        jPanel1.add(jLabel3);

        txfApellido1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txfApellido1FocusGained(evt);
            }
        });
        jPanel1.add(txfApellido1);

        jLabel4.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel4.setText("Apellido Secundario");
        jPanel1.add(jLabel4);

        txfApellido2.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txfApellido2FocusGained(evt);
            }
        });
        jPanel1.add(txfApellido2);

        btnAddCliente.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnAddCliente.setText("Dar de alta");
        btnAddCliente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddClienteActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout darAltaUsuarioLayout = new javax.swing.GroupLayout(darAltaUsuario);
        darAltaUsuario.setLayout(darAltaUsuarioLayout);
        darAltaUsuarioLayout.setHorizontalGroup(
            darAltaUsuarioLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darAltaUsuarioLayout.createSequentialGroup()
                .addGap(50, 50, 50)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 187, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGroup(darAltaUsuarioLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(darAltaUsuarioLayout.createSequentialGroup()
                        .addGap(143, 143, 143)
                        .addComponent(btnAddCliente, javax.swing.GroupLayout.PREFERRED_SIZE, 226, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(darAltaUsuarioLayout.createSequentialGroup()
                        .addGap(57, 57, 57)
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 433, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(74, Short.MAX_VALUE))
        );
        darAltaUsuarioLayout.setVerticalGroup(
            darAltaUsuarioLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darAltaUsuarioLayout.createSequentialGroup()
                .addGap(52, 52, 52)
                .addGroup(darAltaUsuarioLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 266, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(darAltaUsuarioLayout.createSequentialGroup()
                        .addGap(37, 37, 37)
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 146, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(38, 38, 38)
                        .addComponent(btnAddCliente, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addContainerGap(118, Short.MAX_VALUE))
        );

        contenedor.addTab("tab2", darAltaUsuario);

        darBajaUsuario.setBackground(new java.awt.Color(0, 153, 255));

        tablaClientes.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "DNI", "Nombre", "Apellido principal", "Apellido secundario"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane2.setViewportView(tablaClientes);

        btnEliminarCliente.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnEliminarCliente.setText("Dar de baja");
        btnEliminarCliente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarClienteActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout darBajaUsuarioLayout = new javax.swing.GroupLayout(darBajaUsuario);
        darBajaUsuario.setLayout(darBajaUsuarioLayout);
        darBajaUsuarioLayout.setHorizontalGroup(
            darBajaUsuarioLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darBajaUsuarioLayout.createSequentialGroup()
                .addGroup(darBajaUsuarioLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(darBajaUsuarioLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 735, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(darBajaUsuarioLayout.createSequentialGroup()
                        .addGap(264, 264, 264)
                        .addComponent(btnEliminarCliente, javax.swing.GroupLayout.PREFERRED_SIZE, 236, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(60, Short.MAX_VALUE))
        );
        darBajaUsuarioLayout.setVerticalGroup(
            darBajaUsuarioLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, darBajaUsuarioLayout.createSequentialGroup()
                .addGap(41, 41, 41)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 292, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 33, Short.MAX_VALUE)
                .addComponent(btnEliminarCliente, javax.swing.GroupLayout.PREFERRED_SIZE, 45, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(25, 25, 25))
        );

        contenedor.addTab("tab3", darBajaUsuario);

        darAltaCuenta.setBackground(new java.awt.Color(0, 153, 255));

        tablaCuentaBancaria.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Cliente", "IBAN", "Saldo"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.Double.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tablaCuentaBancaria.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tablaCuentaBancariaMouseClicked(evt);
            }
        });
        jScrollPane3.setViewportView(tablaCuentaBancaria);

        jPanel2.setLayout(new java.awt.GridLayout(4, 1, 0, 20));

        jLabel5.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel5.setText("IBAN:");
        jPanel2.add(jLabel5);

        txfAddIban.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txfAddIbanKeyTyped(evt);
            }
        });
        jPanel2.add(txfAddIban);

        jLabel6.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel6.setText("DNI propietario de la cuenta:");
        jPanel2.add(jLabel6);

        txfAddIbanDni.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txfAddIbanDniKeyTyped(evt);
            }
        });
        jPanel2.add(txfAddIbanDni);

        btnAddCuenta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnAddCuenta.setText("Dar de alta cuenta bancaria");
        btnAddCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddCuentaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout darAltaCuentaLayout = new javax.swing.GroupLayout(darAltaCuenta);
        darAltaCuenta.setLayout(darAltaCuentaLayout);
        darAltaCuentaLayout.setHorizontalGroup(
            darAltaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darAltaCuentaLayout.createSequentialGroup()
                .addGap(28, 28, 28)
                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(61, 61, 61)
                .addGroup(darAltaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(btnAddCuenta, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(51, Short.MAX_VALUE))
        );
        darAltaCuentaLayout.setVerticalGroup(
            darAltaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darAltaCuentaLayout.createSequentialGroup()
                .addGap(40, 40, 40)
                .addGroup(darAltaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, 281, Short.MAX_VALUE)
                    .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                .addGap(44, 44, 44)
                .addComponent(btnAddCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(21, Short.MAX_VALUE))
        );

        contenedor.addTab("tab4", darAltaCuenta);

        darBajaCuenta.setBackground(new java.awt.Color(0, 153, 255));

        tablaCuentasEliminar.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Cliente", "IBAN", "Saldo"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.Double.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tablaCuentasEliminar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tablaCuentasEliminarMouseClicked(evt);
            }
        });
        jScrollPane4.setViewportView(tablaCuentasEliminar);

        jPanel3.setLayout(new java.awt.GridLayout(3, 1, 0, 30));
        jPanel3.add(txfClienteCuentaEliminar);
        jPanel3.add(txfIBANEliminar);
        jPanel3.add(txfCuentaSaldoEliminar);

        btnEliminarCuenta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnEliminarCuenta.setText("Dar de baja cuenta bancaria");
        btnEliminarCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarCuentaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout darBajaCuentaLayout = new javax.swing.GroupLayout(darBajaCuenta);
        darBajaCuenta.setLayout(darBajaCuentaLayout);
        darBajaCuentaLayout.setHorizontalGroup(
            darBajaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darBajaCuentaLayout.createSequentialGroup()
                .addGap(27, 27, 27)
                .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 406, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(58, 58, 58)
                .addGroup(darBajaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, 176, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnEliminarCuenta))
                .addContainerGap(98, Short.MAX_VALUE))
        );
        darBajaCuentaLayout.setVerticalGroup(
            darBajaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darBajaCuentaLayout.createSequentialGroup()
                .addGroup(darBajaCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(darBajaCuentaLayout.createSequentialGroup()
                        .addGap(26, 26, 26)
                        .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 295, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(darBajaCuentaLayout.createSequentialGroup()
                        .addGap(24, 24, 24)
                        .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGap(12, 12, 12)
                .addComponent(btnEliminarCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 73, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(30, 30, 30))
        );

        contenedor.addTab("tab5", darBajaCuenta);

        bloquearDesbloquearCuenta.setBackground(new java.awt.Color(0, 153, 255));

        tablaCuentasBloquDesbloqu.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "DNI", "IBAN", "Estado"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane5.setViewportView(tablaCuentasBloquDesbloqu);

        btnBloquearCuenta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnBloquearCuenta.setText("Bloquear");
        btnBloquearCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBloquearCuentaActionPerformed(evt);
            }
        });

        btnDesbloquearCuenta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnDesbloquearCuenta.setText("Desbloquear");
        btnDesbloquearCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDesbloquearCuentaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout bloquearDesbloquearCuentaLayout = new javax.swing.GroupLayout(bloquearDesbloquearCuenta);
        bloquearDesbloquearCuenta.setLayout(bloquearDesbloquearCuentaLayout);
        bloquearDesbloquearCuentaLayout.setHorizontalGroup(
            bloquearDesbloquearCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bloquearDesbloquearCuentaLayout.createSequentialGroup()
                .addGap(49, 49, 49)
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(57, 57, 57)
                .addGroup(bloquearDesbloquearCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnBloquearCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnDesbloquearCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(74, Short.MAX_VALUE))
        );
        bloquearDesbloquearCuentaLayout.setVerticalGroup(
            bloquearDesbloquearCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bloquearDesbloquearCuentaLayout.createSequentialGroup()
                .addGroup(bloquearDesbloquearCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(bloquearDesbloquearCuentaLayout.createSequentialGroup()
                        .addGap(49, 49, 49)
                        .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 317, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(bloquearDesbloquearCuentaLayout.createSequentialGroup()
                        .addGap(148, 148, 148)
                        .addComponent(btnBloquearCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 57, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(39, 39, 39)
                        .addComponent(btnDesbloquearCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 57, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(70, Short.MAX_VALUE))
        );

        contenedor.addTab("tab6", bloquearDesbloquearCuenta);

        darAltaTarjeta.setBackground(new java.awt.Color(0, 153, 255));

        tablaAltaTarjetas.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "DNI", "IBAN", "Número de tarjeta"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tablaAltaTarjetas.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tablaAltaTarjetasMouseClicked(evt);
            }
        });
        jScrollPane6.setViewportView(tablaAltaTarjetas);

        jPanel4.setLayout(new java.awt.GridLayout(6, 1, 0, 20));

        jLabel7.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel7.setText("Número de tarjeta:");
        jPanel4.add(jLabel7);

        txfAddNumTarjeta.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txfAddNumTarjetaKeyTyped(evt);
            }
        });
        jPanel4.add(txfAddNumTarjeta);

        jLabel8.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel8.setText("IBAN vinculado a la tarjeta");
        jPanel4.add(jLabel8);

        txfIbanAddTarjeta.setFocusable(false);
        jPanel4.add(txfIbanAddTarjeta);

        jLabel9.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel9.setText("Contraseña de la tarjeta");
        jPanel4.add(jLabel9);

        txfContrasenaTarjetaAlta.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txfContrasenaTarjetaAltaKeyTyped(evt);
            }
        });
        jPanel4.add(txfContrasenaTarjetaAlta);

        btnAddTarjeta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnAddTarjeta.setText("Dar de alta tarjeta");
        btnAddTarjeta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddTarjetaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout darAltaTarjetaLayout = new javax.swing.GroupLayout(darAltaTarjeta);
        darAltaTarjeta.setLayout(darAltaTarjetaLayout);
        darAltaTarjetaLayout.setHorizontalGroup(
            darAltaTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darAltaTarjetaLayout.createSequentialGroup()
                .addGap(37, 37, 37)
                .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGroup(darAltaTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(darAltaTarjetaLayout.createSequentialGroup()
                        .addGap(18, 18, 18)
                        .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, 188, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(darAltaTarjetaLayout.createSequentialGroup()
                        .addGap(40, 40, 40)
                        .addComponent(btnAddTarjeta)))
                .addContainerGap(106, Short.MAX_VALUE))
        );
        darAltaTarjetaLayout.setVerticalGroup(
            darAltaTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darAltaTarjetaLayout.createSequentialGroup()
                .addGap(35, 35, 35)
                .addGroup(darAltaTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, 281, Short.MAX_VALUE)
                    .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                .addGap(30, 30, 30)
                .addComponent(btnAddTarjeta, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(38, Short.MAX_VALUE))
        );

        contenedor.addTab("tab7", darAltaTarjeta);

        darBajaTarjeta.setBackground(new java.awt.Color(0, 153, 255));

        tablaBajaTarjetas.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "DNI", "IBAN", "Número de tarjeta"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane8.setViewportView(tablaBajaTarjetas);

        btnEliminarTarjeta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnEliminarTarjeta.setText("Dar de baja tarjeta");
        btnEliminarTarjeta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarTarjetaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout darBajaTarjetaLayout = new javax.swing.GroupLayout(darBajaTarjeta);
        darBajaTarjeta.setLayout(darBajaTarjetaLayout);
        darBajaTarjetaLayout.setHorizontalGroup(
            darBajaTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darBajaTarjetaLayout.createSequentialGroup()
                .addGap(35, 35, 35)
                .addComponent(jScrollPane8, javax.swing.GroupLayout.PREFERRED_SIZE, 509, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(btnEliminarTarjeta, javax.swing.GroupLayout.PREFERRED_SIZE, 166, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(79, Short.MAX_VALUE))
        );
        darBajaTarjetaLayout.setVerticalGroup(
            darBajaTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(darBajaTarjetaLayout.createSequentialGroup()
                .addGroup(darBajaTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(darBajaTarjetaLayout.createSequentialGroup()
                        .addGap(32, 32, 32)
                        .addComponent(jScrollPane8, javax.swing.GroupLayout.PREFERRED_SIZE, 358, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(darBajaTarjetaLayout.createSequentialGroup()
                        .addGap(172, 172, 172)
                        .addComponent(btnEliminarTarjeta, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(46, Short.MAX_VALUE))
        );

        contenedor.addTab("tab8", darBajaTarjeta);

        bloquearDesbloquearTarjeta.setBackground(new java.awt.Color(0, 153, 255));

        tablaBloqDesbloqTarjeta.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "DNI", "IBAN", "Número de tarjeta", "Estado"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane7.setViewportView(tablaBloqDesbloqTarjeta);

        btnBloquearTarjeta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnBloquearTarjeta.setText("Bloquear tarjeta");
        btnBloquearTarjeta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBloquearTarjetaActionPerformed(evt);
            }
        });

        btnDesbloquearTarjeta.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnDesbloquearTarjeta.setText("Desbloquear tarjeta");
        btnDesbloquearTarjeta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDesbloquearTarjetaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout bloquearDesbloquearTarjetaLayout = new javax.swing.GroupLayout(bloquearDesbloquearTarjeta);
        bloquearDesbloquearTarjeta.setLayout(bloquearDesbloquearTarjetaLayout);
        bloquearDesbloquearTarjetaLayout.setHorizontalGroup(
            bloquearDesbloquearTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bloquearDesbloquearTarjetaLayout.createSequentialGroup()
                .addGap(38, 38, 38)
                .addComponent(jScrollPane7, javax.swing.GroupLayout.PREFERRED_SIZE, 691, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(72, Short.MAX_VALUE))
            .addGroup(bloquearDesbloquearTarjetaLayout.createSequentialGroup()
                .addGap(116, 116, 116)
                .addComponent(btnBloquearTarjeta, javax.swing.GroupLayout.PREFERRED_SIZE, 138, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btnDesbloquearTarjeta)
                .addGap(166, 166, 166))
        );
        bloquearDesbloquearTarjetaLayout.setVerticalGroup(
            bloquearDesbloquearTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bloquearDesbloquearTarjetaLayout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(jScrollPane7, javax.swing.GroupLayout.PREFERRED_SIZE, 321, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(bloquearDesbloquearTarjetaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(btnBloquearTarjeta, javax.swing.GroupLayout.DEFAULT_SIZE, 37, Short.MAX_VALUE)
                    .addComponent(btnDesbloquearTarjeta, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(48, Short.MAX_VALUE))
        );

        contenedor.addTab("tab9", bloquearDesbloquearTarjeta);

        jPanel6.setBackground(new java.awt.Color(0, 153, 255));

        listaTarjetas.setModel(new javax.swing.DefaultListModel<TarjetaBancaria>()
        );
        listaTarjetas.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                listaTarjetasMouseClicked(evt);
            }
        });
        jScrollPane9.setViewportView(listaTarjetas);

        jPanel7.setLayout(new java.awt.GridLayout(4, 1, 0, 15));

        jLabel12.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel12.setText("Contraseña antigua:");
        jPanel7.add(jLabel12);

        txfPINAntiguo.setFocusable(false);
        jPanel7.add(txfPINAntiguo);

        jLabel13.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel13.setText("Contraseña nueva");
        jPanel7.add(jLabel13);

        txfPINNuevo.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txfPINNuevoKeyTyped(evt);
            }
        });
        jPanel7.add(txfPINNuevo);

        btnCambiarPIN.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnCambiarPIN.setText("Cambiar contraseña");
        btnCambiarPIN.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCambiarPINActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(138, 138, 138)
                        .addComponent(jScrollPane9, javax.swing.GroupLayout.PREFERRED_SIZE, 183, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(73, 73, 73)
                        .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(269, 269, 269)
                        .addComponent(btnCambiarPIN, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(215, Short.MAX_VALUE))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGap(50, 50, 50)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, 292, Short.MAX_VALUE)
                    .addComponent(jScrollPane9))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnCambiarPIN, javax.swing.GroupLayout.PREFERRED_SIZE, 57, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(31, Short.MAX_VALUE))
        );

        contenedor.addTab("tab10", jPanel6);

        jPanel5.setBackground(new java.awt.Color(0, 153, 255));

        jLabel10.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel10.setText("Total de dinero disponible en el banco:");

        txfDineroBanco.setFocusable(false);

        jLabel11.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel11.setText("Total de dinero a introducir en el banco (MAX: 10000)");

        txfCantidadIntroducir.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txfCantidadIntroducirKeyTyped(evt);
            }
        });

        btnIntroducirDinero.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnIntroducirDinero.setText("Introducir dinero");
        btnIntroducirDinero.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnIntroducirDineroActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(143, 143, 143)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel11, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel10, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(btnIntroducirDinero, javax.swing.GroupLayout.DEFAULT_SIZE, 182, Short.MAX_VALUE)
                    .addComponent(txfDineroBanco)
                    .addComponent(txfCantidadIntroducir, javax.swing.GroupLayout.DEFAULT_SIZE, 182, Short.MAX_VALUE))
                .addContainerGap(119, Short.MAX_VALUE))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(90, 90, 90)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txfDineroBanco, javax.swing.GroupLayout.DEFAULT_SIZE, 45, Short.MAX_VALUE)
                    .addComponent(jLabel10, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(45, 45, 45)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel11, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(txfCantidadIntroducir, javax.swing.GroupLayout.DEFAULT_SIZE, 48, Short.MAX_VALUE))
                .addGap(43, 43, 43)
                .addComponent(btnIntroducirDinero, javax.swing.GroupLayout.PREFERRED_SIZE, 45, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(120, Short.MAX_VALUE))
        );

        contenedor.addTab("tab11", jPanel5);

        jMenu1.setText("Administrar usuarios");

        btnAltaUsuario.setText("Dar de alta usuario");
        btnAltaUsuario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAltaUsuarioActionPerformed(evt);
            }
        });
        jMenu1.add(btnAltaUsuario);

        btnBajaUsuario.setText("Dar de baja usuario");
        btnBajaUsuario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBajaUsuarioActionPerformed(evt);
            }
        });
        jMenu1.add(btnBajaUsuario);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("Administrar cuentas bancarias");

        btnAltaCuenta.setText("Dar de alta cuenta");
        btnAltaCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAltaCuentaActionPerformed(evt);
            }
        });
        jMenu2.add(btnAltaCuenta);

        btnBajaCuenta.setText("Dar de baja cuenta");
        btnBajaCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBajaCuentaActionPerformed(evt);
            }
        });
        jMenu2.add(btnBajaCuenta);

        btnBloquDesbloquCuenta.setText("Bloquear/Desbloquear cuenta");
        btnBloquDesbloquCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBloquDesbloquCuentaActionPerformed(evt);
            }
        });
        jMenu2.add(btnBloquDesbloquCuenta);

        jMenuBar1.add(jMenu2);

        jMenu3.setText("Administrar tarjetas");

        btnAltaTarjeta.setText("Dar de alta tarjeta");
        btnAltaTarjeta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAltaTarjetaActionPerformed(evt);
            }
        });
        jMenu3.add(btnAltaTarjeta);

        btnBajaTarjeta.setText("Dar de baja tarjeta");
        btnBajaTarjeta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBajaTarjetaActionPerformed(evt);
            }
        });
        jMenu3.add(btnBajaTarjeta);

        btnBloquDesbloquTarjeta.setText("Bloquear/desbloquear tarjeta");
        btnBloquDesbloquTarjeta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBloquDesbloquTarjetaActionPerformed(evt);
            }
        });
        jMenu3.add(btnBloquDesbloquTarjeta);

        cambiarPIN.setText("Cambiar PIN");
        cambiarPIN.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cambiarPINActionPerformed(evt);
            }
        });
        jMenu3.add(cambiarPIN);

        jMenuBar1.add(jMenu3);

        jMenu4.setText("Administrar cajero");

        btnRellenarCajero.setText("Rellenar cajero");
        btnRellenarCajero.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRellenarCajeroActionPerformed(evt);
            }
        });
        jMenu4.add(btnRellenarCajero);

        btnApagarCajero.setText("Apagar cajero");
        btnApagarCajero.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnApagarCajeroActionPerformed(evt);
            }
        });
        jMenu4.add(btnApagarCajero);

        jMenuBar1.add(jMenu4);

        menuSalir.setText("Salir");
        menuSalir.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                menuSalirMouseClicked(evt);
            }
        });
        jMenuBar1.add(menuSalir);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(contenedor, javax.swing.GroupLayout.PREFERRED_SIZE, 855, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(contenedor, javax.swing.GroupLayout.PREFERRED_SIZE, 436, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    /**
     * Metodo que cambia de pantalla e inicializa la lista de clientes cuando
     * se quiere dar de alta un usuario
     * @param evt objeto del evento que se ha producido
     */
    private void btnAltaUsuarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAltaUsuarioActionPerformed
        moverPantalla(1);
        initListaClientes();
    }//GEN-LAST:event_btnAltaUsuarioActionPerformed

    /**
     * Metodo que cambia de pantalla e inicializa la lista de clientes cuando
     * se quiere dar de baja un usuario
     * @param evt objeto del evento que se ha producido
     */
    private void btnBajaUsuarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBajaUsuarioActionPerformed
        moverPantalla(2);
        initTablaClientes();
    }//GEN-LAST:event_btnBajaUsuarioActionPerformed

    /**
     * Metodo que cambia de pantalla e inicializa la tabla de cuentas cuando
     * se quiere dar de alta una cuenta
     * @param evt objeto del evento que se ha producido
     */
    private void btnAltaCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAltaCuentaActionPerformed
        moverPantalla(3);
        initTablaCuentasAdd();
    }//GEN-LAST:event_btnAltaCuentaActionPerformed

    /**
     * Metodo que cambia de pantalla e inicializa la tabla de cuentas cuando
     * se quiere dar de baja una cuenta
     * @param evt objeto del evento que se ha producido
     */
    private void btnBajaCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBajaCuentaActionPerformed
        moverPantalla(4);
        initTablaCuentasEliminar();
    }//GEN-LAST:event_btnBajaCuentaActionPerformed

    /**
     * Metodo que cambia de pantalla e inicializa la tabla de cuentas cuando
     * se quiere bloquear o desbloquear una cuenta
     * @param evt objeto del evento que se ha producido
     */
    private void btnBloquDesbloquCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBloquDesbloquCuentaActionPerformed
        moverPantalla(5);
        initTablaBloqueos();
    }//GEN-LAST:event_btnBloquDesbloquCuentaActionPerformed

    /**
     * Metodo que cambia de pantalla e inicializa la tabla de tarjetas cuando
     * se quiere dar de alta una tarjeta
     * @param evt objeto del evento que se ha producido
     */
    private void btnAltaTarjetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAltaTarjetaActionPerformed
        moverPantalla(6);
        initTablaTarjetasAdd();
    }//GEN-LAST:event_btnAltaTarjetaActionPerformed

    /**
     * Metodo que cambia de pantalla e inicializa la tabla de tarjetas cuando
     * se quiere dar de baja una tarjeta
     * @param evt objeto del evento que se ha producido
     */
    private void btnBajaTarjetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBajaTarjetaActionPerformed
        moverPantalla(7);
        initTablaTarjetasEliminar();
    }//GEN-LAST:event_btnBajaTarjetaActionPerformed

    /**
     * Metodo que cambia de pantalla e inicializa la tabla de tarjetas cuando
     * se quiere bloquear o desbloquear una tarjetas
     * @param evt objeto del evento que se ha producido
     */
    private void btnBloquDesbloquTarjetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBloquDesbloquTarjetaActionPerformed
        moverPantalla(8);
        initTablaTarjetasBloqDesbloq();
    }//GEN-LAST:event_btnBloquDesbloquTarjetaActionPerformed

    /**
     * Metodo que cambia de pantalla e indica el dinero disponible en el ATM y la 
     * cantidad maxima de dinero que se puede introducir
     * @param evt objeto del evento que se ha producido
     */
    private void btnRellenarCajeroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRellenarCajeroActionPerformed
        moverPantalla(10);
        txfDineroBanco.setText(String.valueOf(dineroDisponible));
        txfCantidadIntroducir.setText(String.valueOf((MAX_CAJERO - dineroDisponible)));
    }//GEN-LAST:event_btnRellenarCajeroActionPerformed

    /**
     * Metodo que apaga totalmente el cajero
     * @param evt objeto del evento que se ha producido
     */
    private void btnApagarCajeroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnApagarCajeroActionPerformed
        System.exit(0);
    }//GEN-LAST:event_btnApagarCajeroActionPerformed

    /**
     * Metodo que cierra el modo administrador
     * @param evt objeto del evento que se ha producido
     */
    private void menuSalirMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_menuSalirMouseClicked
        dispose();
    }//GEN-LAST:event_menuSalirMouseClicked

    /**
     * Metodo que añade un cliente al sistema dado su DNI, nombre y apellidos.
     * Si no es posible añadirlo muestra un mensaje de error indicando el fallo.
     * Si es posible añadirlo lo añade tanto a la lista de clientes como en la BD
     * @param evt objeto del evento que se ha producido
     */
    private void btnAddClienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddClienteActionPerformed
        String dni = txfDNI.getText();
        String nombre = txfNombre.getText();
        String apellido1 = txfApellido1.getText();
        String apellido2 = txfApellido2.getText();
        Cliente c = new Cliente(dni, nombre, apellido1, apellido2, administrador);
        if (dni.equals("") || nombre.equals("") || apellido1.equals("") || apellido2.equals("")) {
            JOptionPane.showMessageDialog(this, "Por favor, rellene todos los campos", "ERROR", JOptionPane.ERROR_MESSAGE);
        } else {
            if (clientes.contains(c)) {
                JOptionPane.showMessageDialog(this, "El cliente ya está registrado en el sistema", "ERROR", JOptionPane.ERROR_MESSAGE);
            } else {
                String insertCliente = "INSERT into cliente values ('" + dni + "','" + nombre + "','" + apellido1 + "','" + apellido2 + "'," + administrador + ");";
                try {
                    sentencia.executeUpdate(insertCliente);
                    modeloListaClientes.addElement(c);
                    clientes.add(c);
                    txfDNI.setText("");
                    txfNombre.setText("");
                    txfApellido1.setText("");
                    txfApellido2.setText("");
                } catch (SQLException ex) {
                    Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }

    }//GEN-LAST:event_btnAddClienteActionPerformed

    /**
     * Cuando se selecciona un cliente de la lista de clientes, se muestran
     * sus datos en pantalla
     * @param evt objeto del evento que se ha producido
     */
    private void listaClientesMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_listaClientesMouseClicked
        Cliente c = listaClientes.getSelectedValue();
        txfDNI.setText(c.getDni());
        txfNombre.setText(c.getNombre());
        txfApellido1.setText(c.getApellido1());
        txfApellido2.setText(c.getApellido2());
    }//GEN-LAST:event_listaClientesMouseClicked

    /**
     * Si la longitud del DNI del nuevo cliente es mayor que 9, elimina
     * el caracter tecleado
     * @param evt objeto del evento que se ha producido
     */
    private void txfDNIKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txfDNIKeyTyped
        if (txfDNI.getText().length() == 9) {
            evt.consume();
        }
    }//GEN-LAST:event_txfDNIKeyTyped

    /**
     * Si el campo del DNI gana el foco, se elimina su contenido
     * @param evt objeto del evento que se ha producido
     */
    private void txfDNIFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txfDNIFocusGained
        txfDNI.setText("");
    }//GEN-LAST:event_txfDNIFocusGained

    /**
     * Si el campo del nombre gana el foco, se elimina su contenido
     * @param evt objeto del evento que se ha producido
     */
    private void txfNombreFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txfNombreFocusGained
        txfNombre.setText("");
    }//GEN-LAST:event_txfNombreFocusGained

    /**
     * Si el campo del primer apellido gana el foco, se elimina su contenido
     * @param evt objeto del evento que se ha producido
     */
    private void txfApellido1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txfApellido1FocusGained
        txfApellido1.setText("");
    }//GEN-LAST:event_txfApellido1FocusGained

    /**
     * Si el campo del segundo apellido gana el foco, se elimina su contenido
     * @param evt objeto del evento que se ha producido
     */
    private void txfApellido2FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txfApellido2FocusGained
        txfApellido2.setText("");
    }//GEN-LAST:event_txfApellido2FocusGained

    /**
     * Metodo que elimina el cliente seleccionado de la tabla de clientes.
     * Solamente se eliminara si se ha seleccionado una fila de la tabla.
     * Se elimina tanto de la tabla como de la base de datos.
     * @param evt objeto del evento que se ha producido
     */
    private void btnEliminarClienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarClienteActionPerformed
        int filaSelec = tablaClientes.getSelectedRow();
        if (filaSelec != -1) {
            String dni = (String) modeloTablaClientes.getValueAt(filaSelec, 0);
            String nombre = (String) modeloTablaClientes.getValueAt(filaSelec, 1);
            String apellido1 = (String) modeloTablaClientes.getValueAt(filaSelec, 2);
            String apellido2 = (String) modeloTablaClientes.getValueAt(filaSelec, 3);
            Cliente c = new Cliente(dni, nombre, apellido1, apellido2, administrador);
            modeloTablaClientes.removeRow(filaSelec);
            clientes.remove(c);
            try {
                String deleteCliente = "delete from cliente where dni = '" + c.getDni() + "';";
                sentencia.executeUpdate(deleteCliente);
            } catch (SQLException ex) {
                Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }//GEN-LAST:event_btnEliminarClienteActionPerformed

    /**
     * Metodo que añade una nueva cuenta bancaria al sistema
     * Si la cuenta ya existe porque se ha introducido un IBAN equivalente a otro
     * registrado en el sistema, mostrará un mensaje de error
     * Si el IBAN nuevo no existe, se añade tanto a la tabla que muestra las cuentas
     * como en la base de datos.
     * @param evt objeto del evento que se ha producido
     */
    private void btnAddCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddCuentaActionPerformed
        String dni = txfAddIbanDni.getText().trim().toUpperCase();
        String iban = txfAddIban.getText().trim().toUpperCase();

        if (txfAddIban.getText().equals("") || txfAddIbanDni.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "Rellene los datos por favor", "ERROR", JOptionPane.ERROR_MESSAGE);
        } else {
            CuentaBancaria cb = new CuentaBancaria(iban, dni);
            if (cuentas.contains(cb)) {
                JOptionPane.showMessageDialog(this, "La cuenta bancaria ya existe", "ERROR", JOptionPane.ERROR_MESSAGE);
                txfAddIban.setText("");
            } else {
                boolean tieneCuenta = true;
                for (int fila = 0; fila < modeloTablaCuentas.getRowCount(); fila++) {
                    if (modeloTablaCuentas.getValueAt(fila, 1) == null) {
                        String dniSinCuenta = (String) modeloTablaCuentas.getValueAt(fila, 0);
                        if (dniSinCuenta.equalsIgnoreCase(dni)) {
                            tieneCuenta = false;
                            modeloTablaCuentas.setValueAt(iban, fila, 1);
                            cuentas.add(cb);
                        }
                    }
                }
                if (tieneCuenta) {
                    Object[] filaNueva = {dni, iban, 0};
                    modeloTablaCuentas.addRow(filaNueva);
                    cuentas.add(cb);
                }
                String insertCuentaNueva = "INSERT into cuenta_bancaria (iban, dniCliente, numeroAdministrador) values('" + iban + "', '" + dni + "', " + administrador + ");";
                try {
                    sentencia.executeUpdate(insertCuentaNueva);
                } catch (SQLException ex) {
                    Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }//GEN-LAST:event_btnAddCuentaActionPerformed

    /**
     * Si el IBAN a introducir tiene una longitud mayor a 28, se
     * elimina el caracter tecleado
     * @param evt objeto del evento que se ha producido
     */
    private void txfAddIbanKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txfAddIbanKeyTyped
        if (txfAddIban.getText().length() == 28) {
            evt.consume();
        }
    }//GEN-LAST:event_txfAddIbanKeyTyped

    /**
     * Si el DNI del cliente que va a controlar la cuenta a crear tiene una longitud
     * mayor a 9, se elimina el caracter tecleado
     * @param evt objeto del evento que se ha producido
     */
    private void txfAddIbanDniKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txfAddIbanDniKeyTyped
        if (txfAddIbanDni.getText().length() == 9) {
            evt.consume();
        }
    }//GEN-LAST:event_txfAddIbanDniKeyTyped

    /**
     * Metodo que elimina la cuenta seleccionada por el administrador
     * Solamente se elimina la cuenta si se ha seleccionado una fila de la tabla
     * Se elimina tanto de la tabla como de la base de datos
     * @param evt objeto del evento que se ha producido
     */
    private void btnEliminarCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarCuentaActionPerformed
        int filaSelec = tablaCuentasEliminar.getSelectedRow();
        if (filaSelec != -1) {
            String iban = (String) modeloTablaCuentas.getValueAt(filaSelec, 1);
            String dni = (String) modeloTablaCuentas.getValueAt(filaSelec, 0);
            CuentaBancaria cbEliminar = new CuentaBancaria(iban, dni);
            cuentas.remove(cbEliminar);
            modeloTablaCuentas.removeRow(filaSelec);
            String deleteCuenta = "delete from cuenta_bancaria where iban ='" + iban + "'";
            try {
                sentencia.executeUpdate(deleteCuenta);
            } catch (SQLException ex) {
                Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }//GEN-LAST:event_btnEliminarCuentaActionPerformed

    /**
     * Cuando se seleccione una fila de la tabla de cuentas, se mostrara los
     * datos pertenecientes a la cuenta de la fila seleccionada
     * @param evt objeto del evento que se ha producido
     */
    private void tablaCuentasEliminarMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tablaCuentasEliminarMouseClicked
        txfClienteCuentaEliminar.setText("");
        txfIBANEliminar.setText("");
        txfCuentaSaldoEliminar.setText("");
        int filaSelec = tablaCuentasEliminar.getSelectedRow();
        if (filaSelec != -1) {
            String dni = (String) modeloTablaCuentas.getValueAt(filaSelec, 0);
            String iban = (String) modeloTablaCuentas.getValueAt(filaSelec, 1);
            double saldo = (double) modeloTablaCuentas.getValueAt(filaSelec, 2);
            txfClienteCuentaEliminar.setText(dni);
            txfIBANEliminar.setText(iban);
            txfCuentaSaldoEliminar.setText(String.valueOf(saldo));
        }

    }//GEN-LAST:event_tablaCuentasEliminarMouseClicked

    /**
     * Metodo que bloquea la cuenta indicada por el administrador
     * Si se ha seleccionado una cuenta y su estado es "Desbloqueada", se
     * cambiara ese estado a "Bloqueada", tanto en la tabla como en la BD
     * @param evt objeto del evento que se ha producido
     */
    private void btnBloquearCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBloquearCuentaActionPerformed
        int filaSelec = tablaCuentasBloquDesbloqu.getSelectedRow();
        if (filaSelec != -1) {
            String bloqueada = (String) modeloTablaCuentas.getValueAt(filaSelec, 2);
            String iban = (String) modeloTablaCuentas.getValueAt(filaSelec, 1);
            if (bloqueada.equals("Desbloqueada")) {
                bloqueada = "Bloqueada";
                modeloTablaCuentas.setValueAt(bloqueada, filaSelec, 2);
                for (CuentaBancaria cb : cuentas) {
                    if (cb.getIban().equalsIgnoreCase(iban)) {
                        cb.setBloqueada(true);
                    }
                }
                String updateCuenta = "update cuenta_bancaria set bloqueada=1, numeroAdministrador = " + administrador + " where iban='" + iban + "';";
                try {
                    sentencia.executeUpdate(updateCuenta);
                } catch (SQLException ex) {
                    Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }//GEN-LAST:event_btnBloquearCuentaActionPerformed

    /**
     * Metodo que desbloquea la cuenta indicada por el administrador
     * Si se ha seleccionado una cuenta y su estado es "Bloqueada", se
     * cambiara ese estado a "Desbloqueada", tanto en la tabla como en la BD
     * @param evt objeto del evento que se ha producido
     */
    private void btnDesbloquearCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDesbloquearCuentaActionPerformed
        int filaSelec = tablaCuentasBloquDesbloqu.getSelectedRow();
        if (filaSelec != -1) {
            String bloqueada = (String) modeloTablaCuentas.getValueAt(filaSelec, 2);
            String iban = (String) modeloTablaCuentas.getValueAt(filaSelec, 1);
            if (bloqueada.equals("Bloqueada")) {
                bloqueada = "Desbloqueada";
                modeloTablaCuentas.setValueAt(bloqueada, filaSelec, 2);
                for (CuentaBancaria cb : cuentas) {
                    if (cb.getIban().equalsIgnoreCase(iban)) {
                        cb.setBloqueada(false);
                    }
                }
                String updateCuenta = "update cuenta_bancaria set bloqueada=0, numeroAdministrador = " + administrador + " where iban='" + iban + "'";
                try {
                    sentencia.executeUpdate(updateCuenta);
                } catch (SQLException ex) {
                    Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }//GEN-LAST:event_btnDesbloquearCuentaActionPerformed

    /**
     * Metodo que da de alta la tarjeta de credito seleccionada
     * @param evt objeto del evento que se ha producido
     */
    private void tablaAltaTarjetasMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tablaAltaTarjetasMouseClicked
        int filaSelec = tablaAltaTarjetas.getSelectedRow();
        if (filaSelec != -1) {
            String iban = (String) modeloTablaTarjetas.getValueAt(filaSelec, 1);
            txfIbanAddTarjeta.setText(iban);
        }
    }//GEN-LAST:event_tablaAltaTarjetasMouseClicked

    /**
     * Añade una nueva tarjeta con las credenciales indicadas por el administrador.
     * No se puede añadir la tarjeta si no indica la cuenta bancaria a la que se
     * va a vincular.
     * @param evt objeto del evento que se ha producido
     */
    private void btnAddTarjetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddTarjetaActionPerformed
        String numero = txfAddNumTarjeta.getText();
        String iban = txfIbanAddTarjeta.getText();
        String contrasena = txfContrasenaTarjetaAlta.getText();
        //Si los campos estan vacios:
        if (numero.equals("") || iban.equals("") || contrasena.equals("")) {
            JOptionPane.showMessageDialog(this, "Introduza todos los datos por favor", "ERROR", JOptionPane.ERROR_MESSAGE);
            //En caso contrario:
        } else {
            String selectDni = "select dniCliente from cuenta_bancaria where iban='" + iban + "';";
            try {
                resultado = sentencia.executeQuery(selectDni);
                resultado.next();
                String dni = resultado.getString("dniCliente");
                TarjetaBancaria tarjeta = new TarjetaBancaria(dni, numero, Integer.parseInt(contrasena), iban);
                //Si la tarjeta ya existe:
                if (tarjetas.contains(tarjeta)) {
                    JOptionPane.showMessageDialog(this, "La tarjeta ya existe", "ERROR", JOptionPane.ERROR_MESSAGE);
                    txfAddNumTarjeta.setText("");
                    //En caso contrario:
                } else {
                    //Si la cuenta bancaria a la que queremos vincular la nueva tarjeta no tiene vinculada ninguna:
                    boolean tieneTarjeta = true;
                    for (int fila = 0; fila < modeloTablaTarjetas.getRowCount(); fila++) {
                        if (modeloTablaTarjetas.getValueAt(fila, 2) == null) {
                            String ibanSinTarjeta = (String) modeloTablaTarjetas.getValueAt(fila, 1);
                            if (ibanSinTarjeta.equalsIgnoreCase(iban)) {
                                tieneTarjeta = false;
                                modeloTablaTarjetas.setValueAt(numero, fila, 2);
                                tarjetas.add(tarjeta);
                            }
                        }
                    }

                    //Si ya tiene vinculada minimo 1 tarjeta:
                    if (tieneTarjeta) {
                        Object[] nuevaFila = {dni, iban, numero};
                        modeloTablaTarjetas.addRow(nuevaFila);
                        tarjetas.add(tarjeta);
                    }

                    //Añadir a la base de datos
                    String insertNuevaTarjeta = "INSERT into tarjeta_bancaria (numero_tarjeta, pin, dniCliente, iban, numeroAdministrador) values ('" + numero + "', " + txfContrasenaTarjetaAlta.getText() + ", '" + dni + "', '" + iban + "', " + administrador + ");";
                    sentencia.executeUpdate(insertNuevaTarjeta);
                }

            } catch (SQLException ex) {
                Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }//GEN-LAST:event_btnAddTarjetaActionPerformed

    /**
     * Si el numero de la tarjeta a introducir es mayor que 19 o se teclea
     * una letra, se elimina el caracter tecleado
     * @param evt objeto del evento que se ha producido
     */
    private void txfAddNumTarjetaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txfAddNumTarjetaKeyTyped
        char caracter = evt.getKeyChar();
        if (txfAddNumTarjeta.getText().length() == 19 || Character.isLetter(caracter)) {
            evt.consume();
        }
    }//GEN-LAST:event_txfAddNumTarjetaKeyTyped

    /**
     * Si la contraseña de la tarjeta a dar de alta tiene mas de 4 digitos o el caracter
     * tecleado es una letra, se consume
     * @param evt objeto del evento que se ha producido
     */
    private void txfContrasenaTarjetaAltaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txfContrasenaTarjetaAltaKeyTyped
        char caracter = evt.getKeyChar();
        if (txfContrasenaTarjetaAlta.getText().length() == 4 || Character.isLetter(caracter)) {
            evt.consume();
        }
    }//GEN-LAST:event_txfContrasenaTarjetaAltaKeyTyped

    /**
     * Metodo que elimina la tarjeta seleccionada. Se eliminara tanto de la 
     * interfaz del administrador como de la base de datos
     * @param evt objeto del evento que se ha producido
     */
    private void btnEliminarTarjetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarTarjetaActionPerformed
        int filaSelec = tablaBajaTarjetas.getSelectedRow();
        if (filaSelec != -1) {
            String tarjeta = (String) modeloTablaTarjetas.getValueAt(filaSelec, 2);
            String getTarjeta = "SELECT * FROM tarjeta_bancaria where numero_tarjeta = '" + tarjeta + "';";
            try {
                resultado = sentencia.executeQuery(getTarjeta);
                while (resultado.next()) {
                    int pin = resultado.getInt("pin");
                    boolean bloqueada = resultado.getBoolean("bloqueada");
                    String dni = resultado.getString("dniCliente");
                    String iban = resultado.getString("iban");
                    int admin = resultado.getInt("numeroAdministrador");
                    TarjetaBancaria tarjetaEliminada = new TarjetaBancaria(tarjeta, pin, bloqueada, dni, iban, admin);
                    tarjetas.remove(tarjetaEliminada);
                    modeloTablaTarjetas.removeRow(filaSelec);
                }

                String deleteTarjeta = "DELETE FROM tarjeta_bancaria where numero_tarjeta = '" + tarjeta + "';";
                sentencia.executeUpdate(deleteTarjeta);

            } catch (SQLException ex) {
                Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
            }

        }
    }//GEN-LAST:event_btnEliminarTarjetaActionPerformed

    /**
     * Metodo que bloquea una tarjeta indicada por el administrador.
     * Se bloquea tanto en la GUI del administrador como en la BD
     * @param evt objeto del evento que se ha producido
     */
    private void btnBloquearTarjetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBloquearTarjetaActionPerformed
        int filaSelec = tablaBloqDesbloqTarjeta.getSelectedRow();
        if (filaSelec != -1) {
            String bloqueada = (String) modeloTablaTarjetas.getValueAt(filaSelec, 3);
            String tarjeta = (String) modeloTablaTarjetas.getValueAt(filaSelec, 2);
            if (bloqueada.equalsIgnoreCase("Desbloqueada")) {
                bloqueada = "Bloqueada";
                modeloTablaTarjetas.setValueAt(bloqueada, filaSelec, 3);
                for (TarjetaBancaria tb : tarjetas) {
                    if (tb.getNumeroTarjeta() != null && tb.getNumeroTarjeta().equalsIgnoreCase(tarjeta)) {
                        tb.setBloqueada(true);
                    }
                }
                String updateTarjeta = "update tarjeta_bancaria set bloqueada=1, numeroAdministrador = " + administrador + " where numero_tarjeta='" + tarjeta + "';";
                try {
                    sentencia.executeUpdate(updateTarjeta);
                } catch (SQLException ex) {
                    Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }//GEN-LAST:event_btnBloquearTarjetaActionPerformed

    /**
     * Metodo que desbloquea una tarjeta indicada por el administrador.
     * Se desbloquea tanto en la GUI del administrador como en la BD
     * @param evt objeto del evento que se ha producido
     */
    private void btnDesbloquearTarjetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDesbloquearTarjetaActionPerformed
        int filaSelec = tablaBloqDesbloqTarjeta.getSelectedRow();
        if (filaSelec != -1) {
            String bloqueada = (String) modeloTablaTarjetas.getValueAt(filaSelec, 3);
            String tarjeta = (String) modeloTablaTarjetas.getValueAt(filaSelec, 2);
            if (bloqueada.equalsIgnoreCase("Bloqueada")) {
                bloqueada = "Desbloqueada";
                modeloTablaTarjetas.setValueAt(bloqueada, filaSelec, 3);
                for (TarjetaBancaria tb : tarjetas) {
                    if (tb.getNumeroTarjeta() != null && tb.getNumeroTarjeta().equalsIgnoreCase(tarjeta)) {
                        tb.setBloqueada(false);
                    }
                }
                String updateTarjeta = "update tarjeta_bancaria set bloqueada=0, numeroAdministrador = " + administrador + " where numero_tarjeta='" + tarjeta + "';";
                try {
                    sentencia.executeUpdate(updateTarjeta);
                } catch (SQLException ex) {
                    Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }//GEN-LAST:event_btnDesbloquearTarjetaActionPerformed

    /**
     * Metodo que introduce en el cajero la cantidad de dinero indicada por el administrador
     * Si la cantidad introducida más la cantidad de dinero que tiene el cajero en ese momento
     * supera la cantidad maxima, se pondrá como limite superior esa cantidad maxima.
     * En caso contrario se introduce la cantidad indicada por el administrador.
     * @param evt objeto del evento que se ha producido
     */
    private void btnIntroducirDineroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnIntroducirDineroActionPerformed
        int cantidadIngresar = Integer.parseInt(txfCantidadIntroducir.getText());
        if (dineroDisponible + cantidadIngresar > MAX_CAJERO) {
            dineroDisponible = MAX_CAJERO;
            txfDineroBanco.setText(String.valueOf(MAX_CAJERO));
            txfCantidadIntroducir.setText("0");
        } else {
            dineroDisponible += cantidadIngresar;
            txfDineroBanco.setText(String.valueOf(dineroDisponible));
            txfCantidadIntroducir.setText(String.valueOf(MAX_CAJERO - dineroDisponible));
        }

    }//GEN-LAST:event_btnIntroducirDineroActionPerformed

    /**
     * Si al rellenar el cajero se teclea un carater no numerico, se elimina
     * @param evt objeto del evento que se ha producido
     */
    private void txfCantidadIntroducirKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txfCantidadIntroducirKeyTyped
        char tecla = evt.getKeyChar();
        if (Character.isLetter(tecla)) {
            evt.consume();
        }
    }//GEN-LAST:event_txfCantidadIntroducirKeyTyped

    /**
     * Al seleccionar una cuenta de la tabla se muestra en la pantalla el DNI
     * del cliente que posee esa cuenta.
     * @param evt objeto del evento que se ha producido
     */
    private void tablaCuentaBancariaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tablaCuentaBancariaMouseClicked
        int filaSelec = tablaCuentaBancaria.getSelectedRow();
        if (filaSelec != -1) {
            String cliente = (String) modeloTablaCuentas.getValueAt(filaSelec, 0);
            txfAddIbanDni.setText(cliente);
        }
    }//GEN-LAST:event_tablaCuentaBancariaMouseClicked

    /**
     * Al elegir la opcion cambiar PIN, se mueve a la pantalla correspondiente y 
     * se inicializa la lista que muestrar los numeros de todas las tarjetas
     * @param evt objeto del evento que se ha producido
     */
    private void cambiarPINActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cambiarPINActionPerformed
        moverPantalla(9);
        initListaTarjetas();
    }//GEN-LAST:event_cambiarPINActionPerformed

    /**
     * Se muestra por pantalla el pin actual de la tarjeta seleccionada en la lista
     * @param evt objeto del evento que se ha producido
     */
    private void listaTarjetasMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_listaTarjetasMouseClicked
        TarjetaBancaria tarjetaSelec = listaTarjetas.getSelectedValue();
        String numeroTarjeta = tarjetaSelec.getNumeroTarjeta();
        String consulta = "select pin from tarjeta_bancaria where numero_tarjeta = '" + numeroTarjeta + "';";
        try {
            resultado = sentencia.executeQuery(consulta);
            while (resultado.next()) {
                int pinTarjetaSelec = resultado.getInt("pin");
                txfPINAntiguo.setText(String.valueOf(pinTarjetaSelec));
            }
        } catch (SQLException ex) {
            Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
        }

    }//GEN-LAST:event_listaTarjetasMouseClicked

    /**
     * Al introducir el nuevo PIN de la tarjeta, si se teclea un digito no 
     * numerico o la longitud del PIN excede los 4 digitos, se elimina el caracter
     * @param evt objeto del evento que se ha producido
     */
    private void txfPINNuevoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txfPINNuevoKeyTyped
        char tecla = evt.getKeyChar();
        if (Character.isLetter(tecla)) {
            evt.consume();
        } else {
            String txfValor = txfPINNuevo.getText();
            if (txfValor.length() == 4) {
                evt.consume();
            }
        }
    }//GEN-LAST:event_txfPINNuevoKeyTyped

    /**
     * Cambia el PIN actual por el nuevo PIN introducido por el administrador.
     * Solamente se cambia si el PIN nuevo tiene 4 digitos numericos
     * @param evt objeto del evento que se ha producido
     */
    private void btnCambiarPINActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCambiarPINActionPerformed
        if (txfPINNuevo.getText().length() != 4) {
            JOptionPane.showMessageDialog(this, "El PIN debe de tener 4 digitos numericos", "ERROR", JOptionPane.ERROR_MESSAGE);
        } else {
            TarjetaBancaria tarjetaSelec = listaTarjetas.getSelectedValue();
            String numeroTarjeta = tarjetaSelec.getNumeroTarjeta();
            for (TarjetaBancaria tb : tarjetas) {
                if (tb.getNumeroTarjeta() != null && tb.getNumeroTarjeta().equals(numeroTarjeta)) {
                    tb.setPin(Integer.parseInt(txfPINNuevo.getText()));
                    String updatePIN = "update tarjeta_bancaria set pin = "+Integer.parseInt(txfPINNuevo.getText())+", numeroAdministrador = "+administrador+" where numero_tarjeta='"+numeroTarjeta+"';";
                    txfPINAntiguo.setText(txfPINNuevo.getText());
                    txfPINNuevo.setText("");
                    try {
                        sentencia.executeUpdate(updatePIN);
                    } catch (SQLException ex) {
                        Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
        }
    }//GEN-LAST:event_btnCambiarPINActionPerformed

    /**
     * Inicializa la lista de tarjetas al querer cambiar un PIN
     */
    private void initListaTarjetas() {
        modeloListaTarjetas = (DefaultListModel) listaTarjetas.getModel();
        modeloListaTarjetas.removeAllElements();
        for (TarjetaBancaria tb : tarjetas) {
            if (tb.getNumeroTarjeta() != null) {
                modeloListaTarjetas.addElement(tb);
            }

        }
    }

    /**
     * Se inicializa la tabla de tarjetas cuando se quiere bloquear o desbloquear
     * una tarjeta
     */
    private void initTablaTarjetasBloqDesbloq() {
        modeloTablaTarjetas = (DefaultTableModel) tablaBloqDesbloqTarjeta.getModel();
        tablaBloqDesbloqTarjeta.setModel(modeloTablaTarjetas);
        tablaBloqDesbloqTarjeta.getColumnModel().getColumn(0).setPreferredWidth(150);
        tablaBloqDesbloqTarjeta.getColumnModel().getColumn(1).setPreferredWidth(340);
        tablaBloqDesbloqTarjeta.getColumnModel().getColumn(2).setPreferredWidth(320);
        tablaBloqDesbloqTarjeta.getColumnModel().getColumn(3).setPreferredWidth(130);
        modeloTablaTarjetas.setRowCount(0);
        String bloqueada;
        for (TarjetaBancaria tarjeta : tarjetas) {
            if (tarjeta.getNumeroTarjeta() != null) {
                if (tarjeta.isBloqueada()) {
                    bloqueada = "Bloqueada";
                } else {
                    bloqueada = "Desbloqueada";
                }
                Object[] fila = {tarjeta.getDniCliente(), tarjeta.getIban(), tarjeta.getNumeroTarjeta(), bloqueada};
                modeloTablaTarjetas.addRow(fila);
            }
        }

    }

    /**
     * Se inicializa la tabla de tarjetas cuando se quiere dar de baja una tarjeta
     */
    private void initTablaTarjetasEliminar() {
        modeloTablaTarjetas = (DefaultTableModel) tablaBajaTarjetas.getModel();
        tablaBajaTarjetas.setModel(modeloTablaTarjetas);
        tablaBajaTarjetas.getColumnModel().getColumn(0).setPreferredWidth(150);
        tablaBajaTarjetas.getColumnModel().getColumn(1).setPreferredWidth(340);
        tablaBajaTarjetas.getColumnModel().getColumn(2).setPreferredWidth(290);
        modeloTablaTarjetas.setRowCount(0);

        for (TarjetaBancaria tarjeta : tarjetas) {
            Object[] fila = {tarjeta.getDniCliente(), tarjeta.getIban(), tarjeta.getNumeroTarjeta()};
            if (tarjeta.getNumeroTarjeta() != null) {
                modeloTablaTarjetas.addRow(fila);
            }
        }
    }

    /**
     * Se inicializa la tabla de tarjetas cuando se quiere dar de alta una tarjeta
     */
    private void initTablaTarjetasAdd() {
        modeloTablaTarjetas = (DefaultTableModel) tablaAltaTarjetas.getModel();
        tablaAltaTarjetas.setModel(modeloTablaTarjetas);
        tablaAltaTarjetas.getColumnModel().getColumn(0).setPreferredWidth(150);
        tablaAltaTarjetas.getColumnModel().getColumn(1).setPreferredWidth(340);
        tablaAltaTarjetas.getColumnModel().getColumn(2).setPreferredWidth(290);
        modeloTablaTarjetas.setRowCount(0);
        for (TarjetaBancaria tarjeta : tarjetas) {
            Object[] fila = {tarjeta.getDniCliente(), tarjeta.getIban(), tarjeta.getNumeroTarjeta()};
            modeloTablaTarjetas.addRow(fila);
        }
    }

    /**
     * Se introduce en el ArrayList "tarjetas" todas las tarjetas de la base de datos.
     */
    private void initTarjetas() {
        String consulta = "select cb.dniCliente,cb.iban,tb.* from cuenta_bancaria cb LEFT JOIN tarjeta_bancaria tb using(iban);";
        try {
            resultado = sentencia.executeQuery(consulta);
            while (resultado.next()) {
                String numero = resultado.getString("numero_tarjeta");
                int pin = resultado.getInt("pin");
                boolean bloqueada = resultado.getBoolean("bloqueada");
                String dni = resultado.getString("dniCliente");
                String iban = resultado.getString("iban");
                TarjetaBancaria tarjeta = new TarjetaBancaria(numero, pin, bloqueada, dni, iban, administrador);
                tarjetas.add(tarjeta);

            }
        } catch (SQLException ex) {
            Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    /**
     * Se introduce en el ArrayList "cuentas" todas las cuentas bancarias de la base de datos.
     */
    private void initCuentas() {
        String consulta = "SELECT cb.* from cliente c join cuenta_bancaria cb on c.dni=cb.dniCliente order by c.dni;";
        try {
            resultado = sentencia.executeQuery(consulta);
            while (resultado.next()) {
                String iban = resultado.getString("iban");
                double saldo = Math.round(resultado.getDouble("saldo") * 100.0) / 100.0;
                boolean bloqueada = resultado.getBoolean("bloqueada");
                String dniCliente = resultado.getString("dniCliente");
                int admin = resultado.getInt("numeroAdministrador");
                CuentaBancaria cb = new CuentaBancaria(iban, saldo, bloqueada, dniCliente, admin);
                cuentas.add(cb);
            }
        } catch (SQLException ex) {
            Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    /**
     * Se inicializa la tabla de cuentas cuando se quiere bloquear una cuenta.
     */
    private void initTablaBloqueos() {
        modeloTablaCuentas = (DefaultTableModel) tablaCuentasBloquDesbloqu.getModel();
        tablaCuentasBloquDesbloqu.setModel(modeloTablaCuentas);
        tablaCuentasBloquDesbloqu.getColumnModel().getColumn(0).setPreferredWidth(130);
        tablaCuentasBloquDesbloqu.getColumnModel().getColumn(1).setPreferredWidth(310);
        tablaCuentasBloquDesbloqu.getColumnModel().getColumn(2).setPreferredWidth(130);
        modeloTablaCuentas.setRowCount(0);
        String bloqueada;
        for (CuentaBancaria cb : cuentas) {
            if (cb.isBloqueada()) {
                bloqueada = "Bloqueada";
            } else {
                bloqueada = "Desbloqueada";
            }
            Object[] fila = {cb.getDniCliente(), cb.getIban(), bloqueada};
            modeloTablaCuentas.addRow(fila);
        }
    }

    /**
     * Se inicializa la tabla de cuentas cuando se quiere dar de alta una cuenta
     */
    private void initTablaCuentasAdd() {
        modeloTablaCuentas = (DefaultTableModel) tablaCuentaBancaria.getModel();
        tablaCuentaBancaria.setModel(modeloTablaCuentas);
        tablaCuentaBancaria.getColumnModel().getColumn(0).setPreferredWidth(130);
        tablaCuentaBancaria.getColumnModel().getColumn(1).setPreferredWidth(310);
        tablaCuentaBancaria.getColumnModel().getColumn(2).setPreferredWidth(100);
        modeloTablaCuentas.setRowCount(0);

        String selectCuentas = "select * from cliente c LEFT join cuenta_bancaria cb on c.dni = cb.dniCliente;";
        try {
            resultado = sentencia.executeQuery(selectCuentas);
            while (resultado.next()) {
                String dni = resultado.getString("dni");
                String iban = resultado.getString("iban");
                double saldo = Math.round(resultado.getDouble("saldo") * 100.0) / 100.0;
                Object[] fila = {dni, iban, saldo};
                modeloTablaCuentas.addRow(fila);
            }
        } catch (SQLException ex) {
            Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    /**
     * Se inicializa la tabla de cuentas cuando se quiere dar de baja una cuenta
     */
    private void initTablaCuentasEliminar() {
        modeloTablaCuentas = (DefaultTableModel) tablaCuentasEliminar.getModel();
        tablaCuentasEliminar.setModel(modeloTablaCuentas);
        tablaCuentasEliminar.getColumnModel().getColumn(0).setPreferredWidth(130);
        tablaCuentasEliminar.getColumnModel().getColumn(1).setPreferredWidth(310);
        tablaCuentasEliminar.getColumnModel().getColumn(2).setPreferredWidth(100);
        modeloTablaCuentas.setRowCount(0);

        for (CuentaBancaria cb : cuentas) {
            Object[] fila = {cb.getDniCliente(), cb.getIban(), cb.getSaldo()};
            modeloTablaCuentas.addRow(fila);
        }
    }

    /**
     * Inicializa el ArrayList "clientes" introduciendo todos los clientes de la 
     * base de datos en el ArrayList
     */
    private void initClientes() {
        try {
            sentencia = conexion.createStatement();
            String consulta = "SELECT * FROM cliente;";
            resultado = sentencia.executeQuery(consulta);
            while (resultado.next()) {
                String dni = resultado.getString("dni");
                String nombre = resultado.getString("nombre");
                String apellido1 = resultado.getString("apellido1");
                String apellido2 = resultado.getString("apellido2");
                int admin = resultado.getInt("numeroAdministrador");
                Cliente c = new Cliente(dni, nombre, apellido1, apellido2, admin);
                clientes.add(c);
            }
        } catch (SQLException ex) {
            Logger.getLogger(VentanaAdministrador.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    /**
     * Se introduce todos los clientes en la lista cuando se queire dar de alta un nuevo cliente
     */
    private void initListaClientes() {
        modeloListaClientes = (DefaultListModel) listaClientes.getModel();
        modeloListaClientes.removeAllElements();
        for (Cliente c : clientes) {
            modeloListaClientes.addElement(c);
        }

    }

    /**
     * Se introduce todos los clientes en la tabla cuando se queire dar de baja un cliente existente
     */
    private void initTablaClientes() {
        modeloTablaClientes = (DefaultTableModel) tablaClientes.getModel();
        tablaClientes.setModel(modeloTablaClientes);
        modeloTablaClientes.setRowCount(0);

        for (Cliente c : clientes) {
            Object[] fila = {c.getDni(), c.getNombre(), c.getApellido1(), c.getApellido2()};
            modeloTablaClientes.addRow(fila);
        }
    }

    /**
     * Inicializacion de la base de datos, donde se establece la conexion con esta.
     */
    private void initBD() {
        conexion = Conexion.mySQL("atm", "root", "");
        if (conexion == null) {
            JOptionPane.showMessageDialog(this, "No hay acceso a la base de datos", "ERROR", JOptionPane.ERROR_MESSAGE);
            System.exit(0);
        }
    }

    /**
     * Metodo que mueve la pantalla de la actual a la indicada por parametro
     * @param pant indice que representa la pantalla a la que se va a mover la GUI del administrador
     */
    private void moverPantalla(int pant) {
        contenedor.setSelectedIndex(pant);
        pantalla = contenedor.getSelectedIndex();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(VentanaAdministrador.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(VentanaAdministrador.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(VentanaAdministrador.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(VentanaAdministrador.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                int numAdmin = 0;
                int dineroDispon = 0;
                new VentanaAdministrador(numAdmin, dineroDispon).setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel bloquearDesbloquearCuenta;
    private javax.swing.JPanel bloquearDesbloquearTarjeta;
    private javax.swing.JButton btnAddCliente;
    private javax.swing.JButton btnAddCuenta;
    private javax.swing.JButton btnAddTarjeta;
    private javax.swing.JMenuItem btnAltaCuenta;
    private javax.swing.JMenuItem btnAltaTarjeta;
    private javax.swing.JMenuItem btnAltaUsuario;
    private javax.swing.JMenuItem btnApagarCajero;
    private javax.swing.JMenuItem btnBajaCuenta;
    private javax.swing.JMenuItem btnBajaTarjeta;
    private javax.swing.JMenuItem btnBajaUsuario;
    private javax.swing.JMenuItem btnBloquDesbloquCuenta;
    private javax.swing.JMenuItem btnBloquDesbloquTarjeta;
    private javax.swing.JButton btnBloquearCuenta;
    private javax.swing.JButton btnBloquearTarjeta;
    private javax.swing.JButton btnCambiarPIN;
    private javax.swing.JButton btnDesbloquearCuenta;
    private javax.swing.JButton btnDesbloquearTarjeta;
    private javax.swing.JButton btnEliminarCliente;
    private javax.swing.JButton btnEliminarCuenta;
    private javax.swing.JButton btnEliminarTarjeta;
    private javax.swing.JButton btnIntroducirDinero;
    private javax.swing.JMenuItem btnRellenarCajero;
    private javax.swing.JMenuItem cambiarPIN;
    private javax.swing.JTabbedPane contenedor;
    private javax.swing.JPanel darAltaCuenta;
    private javax.swing.JPanel darAltaTarjeta;
    private javax.swing.JPanel darAltaUsuario;
    private javax.swing.JPanel darBajaCuenta;
    private javax.swing.JPanel darBajaTarjeta;
    private javax.swing.JPanel darBajaUsuario;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenu jMenu3;
    private javax.swing.JMenu jMenu4;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JScrollPane jScrollPane6;
    private javax.swing.JScrollPane jScrollPane7;
    private javax.swing.JScrollPane jScrollPane8;
    private javax.swing.JScrollPane jScrollPane9;
    private javax.swing.JLabel lblFondo;
    private javax.swing.JList<Cliente> listaClientes;
    private javax.swing.JList<TarjetaBancaria> listaTarjetas;
    private javax.swing.JMenu menuSalir;
    private javax.swing.JPanel paginaPrincipal;
    private javax.swing.JTable tablaAltaTarjetas;
    private javax.swing.JTable tablaBajaTarjetas;
    private javax.swing.JTable tablaBloqDesbloqTarjeta;
    private javax.swing.JTable tablaClientes;
    private javax.swing.JTable tablaCuentaBancaria;
    private javax.swing.JTable tablaCuentasBloquDesbloqu;
    private javax.swing.JTable tablaCuentasEliminar;
    private javax.swing.JTextField txfAddIban;
    private javax.swing.JTextField txfAddIbanDni;
    private javax.swing.JTextField txfAddNumTarjeta;
    private javax.swing.JTextField txfApellido1;
    private javax.swing.JTextField txfApellido2;
    private javax.swing.JTextField txfCantidadIntroducir;
    private javax.swing.JTextField txfClienteCuentaEliminar;
    private javax.swing.JTextField txfContrasenaTarjetaAlta;
    private javax.swing.JTextField txfCuentaSaldoEliminar;
    private javax.swing.JTextField txfDNI;
    private javax.swing.JTextField txfDineroBanco;
    private javax.swing.JTextField txfIBANEliminar;
    private javax.swing.JTextField txfIbanAddTarjeta;
    private javax.swing.JTextField txfNombre;
    private javax.swing.JTextField txfPINAntiguo;
    private javax.swing.JTextField txfPINNuevo;
    // End of variables declaration//GEN-END:variables
    private int pantalla;
    Connection conexion;
    Statement sentencia;
    ResultSet resultado;
    private ArrayList<Cliente> clientes;
    private ArrayList<CuentaBancaria> cuentas;
    private ArrayList<TarjetaBancaria> tarjetas;
    DefaultListModel<Cliente> modeloListaClientes;
    DefaultListModel<TarjetaBancaria> modeloListaTarjetas;
    DefaultTableModel modeloTablaClientes;
    DefaultTableModel modeloTablaCuentas;
    DefaultTableModel modeloTablaTarjetas;
}
